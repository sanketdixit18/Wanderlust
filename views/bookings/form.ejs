<!-- <% layout('layouts/boilerplate') %>
<script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'airbnb-red': '#FF385C',
            'airbnb-hover': '#E03250'
          }
        }
      }
    }
  </script>


<body class="bg-gray-50 font-sans">

<div class="min-h-screen flex items-center justify-center p-4">
  <div class="bg-white shadow-xl rounded-2xl w-full max-w-md p-8">
    <h2 class="text-3xl font-bold text-gray-900 mb-6">Reserve: <%= listing.title %></h2>

    <p class="text-xl font-semibold text-gray-800 mb-4">
      Price: $<%= listing.pricePerNight ? listing.pricePerNight.toFixed(2) : '0.00' %> / night
    </p>

<form action="/listings/<%= listing._id %>/book" method="POST">
  <!-- Check-in & Check-out -->
      <!-- <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Check-In</label>
          <input type="date" name="checkIn" required
                 class="w-full border-gray-300 rounded-lg shadow-sm focus:ring-airbnb-red focus:border-airbnb-red p-2">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Check-Out</label>
          <input type="date" name="checkOut" required
                 class="w-full border-gray-300 rounded-lg shadow-sm focus:ring-airbnb-red focus:border-airbnb-red p-2">
        </div>
      </div> -->

      <!-- Guests -->
      <!-- <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Guests</label>
        <input type="number" name="guests" min="1" value="1" required
               class="w-full border-gray-300 rounded-lg shadow-sm focus:ring-airbnb-red focus:border-airbnb-red p-2">
      </div>

      <!-- Submit Button -->
      <!-- <button type="submit"
              class="w-full py-3 bg-airbnb-red text-white font-semibold rounded-lg shadow-md hover:bg-airbnb-hover transition-transform transform hover:scale-[1.02]">
        Confirm Booking
      </button>
</form> --> 


<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = {
    theme: {
      extend: {
        fontFamily: { sans: ['Inter', 'sans-serif'] },
        colors: {
          'airbnb-red': '#FF385C',
          'airbnb-hover': '#E03250',
          'primary-blue': '#1d4ed8',
          'primary-hover': '#1e40af',
        }
      }
    }
  }
</script>

<title>Booking</title>
</head>
<body>
  <div class="min-h-screen bg-gray-50 flex items-center justify-center p-4 sm:p-6 font-sans">
    <div class="w-full max-w-lg bg-white p-8 rounded-xl shadow-2xl border border-gray-200">
      <div class="mb-6 pb-4 border-b border-gray-200">
        <h2 class="text-3xl font-extrabold text-gray-900">
          Reserve: <%= listing.title %>
        </h2>
        <p class="text-2xl font-bold text-gray-800 mt-2">
          ₹<span id="pricePerNight"><%= listing.price %></span> / night
        </p>
      </div>

      <form action="/listings/<%= listing._id %>/book" method="POST" class="space-y-6">
        <div class="border border-gray-300 rounded-lg overflow-hidden">
          <div class="flex border-b border-gray-300">
            <div class="w-1/2 p-3 border-r border-gray-300">
              <label for="checkIn" class="block text-xs font-bold text-gray-800 uppercase mb-0.5">Check-In</label>
              <input type="date" id="checkIn" name="checkIn" required class="w-full text-sm text-gray-700 p-0 border-none focus:ring-0 bg-transparent" onchange="updateSummary()">
            </div>
            <div class="w-1/2 p-3">
              <label for="checkOut" class="block text-xs font-bold text-gray-800 uppercase mb-0.5">Check-Out</label>
              <input type="date" id="checkOut" name="checkOut" required class="w-full text-sm text-gray-700 p-0 border-none focus:ring-0 bg-transparent" onchange="updateSummary()">
            </div>
          </div>
          <div class="p-3">
            <label for="guests" class="block text-xs font-bold text-gray-800 uppercase mb-0.5">Guests</label>
            <input type="number" id="guests" name="guests" min="1" value="1" required class="w-full text-sm text-gray-700 p-0 border-none focus:ring-0 bg-transparent" onchange="updateSummary()">
          </div>
        </div>

        <div class="pt-2">
          <h3 class="text-lg font-semibold text-gray-800 mb-3">Price Details</h3>
          <div class="space-y-3 text-gray-600">
            <div class="flex justify-between">
              <p class="text-sm underline cursor-pointer hover:text-gray-900">
                ₹<span id="rateSummary"><%= listing.price %></span> × <span id="nightCount">1</span> night
              </p>
              <p class="text-sm font-medium text-gray-800">₹<span id="subtotal"><%= listing.price %></span></p>
            </div>
            <div class="flex justify-between">
              <p class="text-sm underline cursor-pointer hover:text-gray-900">Service Fee</p>
              <p class="text-sm font-medium text-gray-800">₹<span id="serviceFee">500</span></p>
            </div>
            <div class="flex justify-between">
              <p class="text-sm underline cursor-pointer hover:text-gray-900">Cleaning Fee</p>
              <p class="text-sm font-medium text-gray-800">₹<span id="cleaningFee">300</span></p>
            </div>
          </div>

          <div class="border-t border-gray-300 pt-4 mt-4 flex justify-between font-bold text-lg text-gray-900">
            <p>Total (INR)</p>
            <p>₹<span id="totalAmount"><%= listing.price + 800 %></span></p>
          </div>
        </div>

        <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-lg text-base font-semibold text-white bg-airbnb-red hover:bg-airbnb-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-airbnb-red transition duration-200 ease-in-out transform hover:scale-[1.01]">
          Confirm Booking
        </button>
      </form>
    </div>
  </div>

  <script>
    function updateSummary() {
      const checkIn = document.getElementById('checkIn').value;
      const checkOut = document.getElementById('checkOut').value;

      let nights = 1;
      if (checkIn && checkOut) {
        const startDate = new Date(checkIn);
        const endDate = new Date(checkOut);
        if (endDate > startDate) {
          nights = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24));
        }
      }

      const pricePerNight = parseFloat(document.getElementById('pricePerNight').textContent);
      const serviceFee = 500;
      const cleaningFee = 300;
      const subtotal = pricePerNight * nights;
      const total = subtotal + serviceFee + cleaningFee;

      document.getElementById('nightCount').textContent = nights;
      document.getElementById('rateSummary').textContent = pricePerNight.toFixed(2);
      document.getElementById('subtotal').textContent = subtotal.toFixed(2);
      document.getElementById('totalAmount').textContent = total.toFixed(2);
    }

    window.onload = updateSummary;
  </script>
</body>
